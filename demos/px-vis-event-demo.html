<link rel="import" href="../../polymer/polymer.html">

<link rel="import" href="../px-vis-scale.html">
<link rel="import" href="../px-vis-svg.html">
<link rel="import" href="../px-vis-event.html">

<dom-module id="px-vis-event-demo">
  <link rel="import" type="css" href="../css/px-vis-demo.css"/>
  <template>
    <p id="px-vis-event-anchor" class="epsilon demo__title">px-vis-event</p>
    <div class="demo u-p+">
      <div class="outline">

      <!-- need for event -->
        <px-vis-svg
          width="[[width]]"
          height="[[height]]"
          margin="[[margin]]"
          svg="{{svg}}">
        </px-vis-svg>
        <px-vis-scale
          x-axis-type="time"
          y-axis-type="linear"
          complete-series-config="[[seriesConfig]]"
          chart-extents="[[chartExtents]]"
          width="[[width]]"
          height="[[height]]"
          margin="[[margin]]"
          chart-data={{chartData}}
          x="{{x}}"
          y="{{y}}"
          domain-changed='{{domainChanged}}'
          current-domain-x="{{currentDomainX}}"
          current-domain-y="{{currentDomainY}}"
          selected-domain="[[selectedDomain]]">
        </px-vis-scale>
        <px-vis-event
          svg="[[svg]]"
          x-axis-type="time"
          event-id="[[eventData.event1.id]]"
          event-data="[[eventData.event1]]"
          x="[[x]]"
          y="[[y]]"
          event-config="[[eventConfig]]"
          current-domain-x="[[currentDomainX]]"
          current-domain-y="[[currentDomainY]]">
        </px-vis-event>
        <px-vis-event
          svg="[[svg]]"
          x-axis-type="time"
          event-id="[[eventData.event2.id]]"
          event-data="[[eventData.event2]]"
          x="[[x]]"
          y="[[y]]"
          event-config="[[eventConfig]]"
          current-domain-x="[[currentDomainX]]"
          current-domain-y="[[currentDomainY]]">
        </px-vis-event>
        <px-vis-event
          svg="[[svg]]"
          x-axis-type="time"
          event-id="[[eventData.event3.id]]"
          event-data="[[eventData.event3]]"
          x="[[x]]"
          y="[[y]]"
          event-config="[[eventConfig]]"
          current-domain-x="[[currentDomainX]]"
          current-domain-y="[[currentDomainY]]">
        </px-vis-event>
        <px-vis-event
          svg="[[svg]]"
          x-axis-type="time"
          event-id="[[eventData.event4.id]]"
          event-data="[[eventData.event4]]"
          x="[[x]]"
          y="[[y]]"
          event-config="[[eventConfig]]"
          current-domain-x="[[currentDomainX]]"
          current-domain-y="[[currentDomainY]]">
        </px-vis-event>

      </div>
      <div class="demo__discription">
        <p class="u-mt0">Chart events use their own dataset. A vertical line is drawn at the x-coordinate and an icon above.</p>
        <p>A configuration object can be applied to associate the event label with a desired icon, color, and position. If no configuration is set for a label, a default icon and color are applied.</p>
        <p>The icons can either be a: </p>
        <ul>
          <li>Font Awesome class name, e.g. 'fa-camera'</li>
          <li>Font Awesome unicode, e.g. '\uf015' </li>
          <li>url to an image file; png, jpg, gif all work</li>
        </ul>
        <p>The colors are px-colors-design colors. </p>
        <p>Since each icon / image have a different center point, you may need to specify an offset to center the icon above the line. The offset is a two element array consisiting of an x and y value, '[x,y]'. For images, you'll also have to specify a size </p>
      </div>
    </div>
    <div>
      <px-demo-snippet
        element-properties="[[elempropEvent]]"
        element-name="px-vis-event"
        code-link="http://codepen.io/menkhakl/pen/YGYEyg?editors=1010">
      </px-demo-snippet>
    </div>

  </template>
  <script>
    Polymer({
      is: "px-vis-event-demo",
      properties:{
        //basics
        width: {
          type : Number,
          value : 500
        },
        height:{
          type : Number,
          value : 200
        },
        margin:{
          type : Object,
          value : {
            "top": 50,
            "right": 10,
            "bottom": 10,
            "left": 10
          }
        },
        chartData:{
          type : Array,
          value : [{
              'x': 1397102460000,
              'y': 0.56
            },{
              'x': 1397139660000,
              'y': 0.4
            },{
              'x': 1397177400000,
              'y': 0.43
            },{
              'x': 1397228040000,
              'y': 0.33
            },{
              'x': 1397248260000,
              'y': 0.47
            },{
              'x': 1397291280000,
              'y': 0.41
            },{
              'x': 1397318100000,
              'y': 0.26
            },{
              'x': 1397342100000,
              'y': 0.42
            },{
              'x': 1397390820000,
              'y': 0.27
            },{
              'x': 1397408100000,
              'y': 0.38
            },{
              'x': 1397458800000,
              'y': 0.36
            },{
              'x': 1397522940000,
              'y': 0.32
          }]
        },
        seriesConfig:{
          type : Object,
          value: {
            'mySeries': {
              "name":"My-Series",
              "type": "line",
              "x": 'x',
              "y": 'y',
              'color': "rgb(93,165,218)"
            }
          }
        },
        //chartExtents
        chartExtents:{
          type : Object,
          value: {
            "x": [Infinity,-Infinity],
            "y": [0,-Infinity]
          }
        },
        //event specfic objects
        eventData:{
          type : Object,
          value: {
            "event1": {
              "id": "123",
              "x": 1397139660000,
              "label": "Default"
            },
            "event2": {
              "id": "456",
              "x": 1397248260000,
              "label": "Font Awesome"
            },
            "event3": {
              "id": "789",
              "x": 1397342100000,
              "label": "Unicode"
            },
            "event4": {
              "id": "333",
              "x": 1397458800000,
              "label": "Image"
            }
          }
        },
        eventConfig:{
          type : Object,
          value: {
            "Font Awesome":{
              "color": "blue",
              "icon": "fa-camera",
              "type": "fa",
              "offset":[0,0]
            },
            "Unicode":{
              "color": "green",
              "icon": "\uf015",
              "type": "unicode",
              "offset":[1,0]
            },
            "Image":{
              "icon": "ge_logo.png",
              "type": "image",
              "offset":[0,-20],
              "size":"20"
            }
          }
        },

        // demo snippet
        elempropEvent:{
          type : Object,
          value:{
            "svg":"[[svg]]",
            "xAxisType":"time",
            "eventId":"[[eventData.event1.id]]",
            "eventData":"[[eventData.event1]]",
            "x":"[[x]]",
            "y":"[[y]]",
            "eventConfig":"[[eventConfig]]",
            "currentDomainX":"[[currentDomainX]]",
            "currentDomainY":"[[currentDomainY]]"
          }
        }
      }
    });

  </script>
</dom-module>
