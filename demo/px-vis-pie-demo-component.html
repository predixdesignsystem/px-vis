<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../px-vis-pie.html">
<link rel="import" href="../px-vis-svg.html">

<link rel="import" href="../px-vis-behavior-common.html">


<dom-module id="px-vis-pie-demo-component">
  <template>
    <!--add demo tag-->
    <px-vis-svg
      svg="{{svg}}"
      width="[[width]]"
      height="[[height]]"
      offset="[250,250]"
      margin="[[margin]]"
      px-svg-elem="{{pxSvgElem}}">
    </px-vis-svg>
    <px-vis-pie
    id="baseLine"
    svg="[[svg]]"
    width="[[width]]"
    height="[[height]]"
    radius="[[radius]]"
    chart-data="[[chartData]]"
    margin="[[margin]]"
    complete-series-config="[[completeSeriesConfig]]"
    series-id="[[seriesId]]"
    px-svg-elem="[[pxSvgElem]]"></px-vis-pie>
  </template>
</dom-module>

<script>
Polymer({
  is: 'px-vis-pie-demo-component',

  behaviors: [
    PxColorsBehavior.dataVisColors,
    PxColorsBehavior.dataVisColorTheming,
    PxColorsBehavior.getSeriesColors
  ],

  properties: {
    description: {
      type: String,
      value: "Creates an interactive pie or donut chart."
    },
    margin: {
      type: Object,
      value: {
        "top": 0,
        "right": 0,
        "bottom": 0,
        "left": 0
      }
    },
    width: {
      type: Number,
      value: 500
    },
    height: {
      type: Number,
      value: 500
    },
    radius: {
      type: Number,
      value: 250
    },
    chartData: {
      type: Array
    },
    completeSeriesConfig: {
      type: Object,
      value: {
        "y":{
          "y": "y",
          "x": "x",
          "name":"mySeries",
          "xAxisUnit":"pint"
        }
      }
    },
    seriesId: {
      value: 'y',
      type: String
    }
  },

  listeners: {
    "px-data-vis-colors-applied" : '_returnChartData'
  },

  _returnChartData: function() {
    this.set('chartData', [
      {
        "x":15,
        "y":"IPA",
        "colorIndex":0,
        "percentage":"26"
      },{
        "x":1,
        "y":"Pils",
        "colorIndex":1,
        "percentage":"2"
      },{
        "x":1,
        "y":"Lager",
        "colorIndex":2,
        "percentage":"2"
      },{
        "x":8,
        "y":"Lambic",
        "colorIndex":3,
        "percentage":"14"
      },{
        "x":12,
        "y":"Stout",
        "colorIndex":4,
        "percentage":"21"
      },{
        "x":7,
        "y":"Pale Ale",
        "colorIndex":5,
        "percentage":"12"
      },{
        "x":9,
        "y":"Porter",
        "colorIndex":6,
        "percentage":"16"
      },{
        "x":4,
        "y":"Heffeweisse",
        "colorIndex":7,
        "percentage":"7"
      }
    ]);
  }
});
</script>
